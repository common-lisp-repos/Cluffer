\appendix

\section{Protocol}

In this section, we describe the protocols that are implemented by our
library.

For each class, generic function, and condition type, we only include
a brief description.  In particular, we do not include a complete
description of the exceptional situations possible.  For a complete
description, see the \texttt{Documentation} subdirectory in
the repository at GitHub.%
\footnote{\texttt{https://github.com/robert-strandh/Cluffer}}

\subsection{Classes}

\Defprotoclass {buffer}

This class is the base class of all buffers.  Each different buffer
implementation defines specific implementation classes to be
instantiated by client code.

\Defprotoclass {line}

This class is the base class of all lines.  Each different line
implementation defines specific implementation classes to be
instantiated by client code.

\Defprotoclass {cursor}

This class is the base class of all cursors.  Each different line
implementation defines specific implementation classes to be
instantiated by client code.

\subsection{Generic functions}

\Defgeneric {item-count} {entity}

If \textit{entity} is a line, then return the number of items in that
line.  If \textit{entity} is a cursor, return the number of items in
the line in which \textit{cursor} is located.  If \textit{entity} is a
buffer, then return the number of items in the buffer.

\Defgeneric {item-at-position} {line position}

Return the item located at \textit{position} in \textit{line}.

\Defgeneric {insert-item-at-position} {line item position}

Insert \textit{item} into \textit{line} at \textit{position}.

After this operation completes, what happens to cursors located at
\textit{position} before the operation depends on the class of the
cursor and of \textit{line}.

\Defgeneric {delete-item-at-position} {line position}

Delete the item at \textit{position} in \textit{line}.

\Defgeneric {cursor-position} {cursor}

Return the position of \textit{cursor} in the line to which it is
attached.
